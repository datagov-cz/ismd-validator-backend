@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix ex: <http://example.org/shapes#> .

# Warning rule: Vocabulary with different IRI but same name
ex:VocabularyDifferentIriSameNameWarningRule
    a sh:NodeShape ;
    sh:targetClass skos:ConceptScheme ;
    sh:name "Slovník s jiným IRI ale stejným názvem" ;
    sh:description "Warns if published vocabulary exists with different IRI but same name" ;
    sh:message "Mezi publikovanými slovníky existuje slovník s jiným IRI a stejným názvem"@cs ;
    sh:severity sh:Warning ;

    sh:sparql [
        sh:select """
            PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
            PREFIX dct: <http://purl.org/dc/terms/>

            SELECT $this ?otherVocabulary WHERE {
                $this a skos:ConceptScheme .
                $this rdfs:label|skos:prefLabel|dct:title ?name .
                ?otherVocabulary a skos:ConceptScheme .
                ?otherVocabulary rdfs:label|skos:prefLabel|dct:title ?name .
                FILTER($this != ?otherVocabulary)
            }
        """ ;
    ] .